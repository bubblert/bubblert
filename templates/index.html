{% include 'base.html' %}

{% block additionaljs %}
<script async>
  let allNews = [];
  $(document).ready(function () {
    let socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function () {
      socket.emit('start_news_stream');
    });

    socket.on('news_add', function (data) {
      let current_news = JSON.parse(data);
      allNews.push(current_news);
    });
  });
</script>
{% endblock additionaljs %}
